<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tracing the City — Vertical Garden</title>
  <style>
    /* ---------- CSS VARIABLES ---------- */
    :root{
      --bg:#ffffff;
      --grid:#00000010;            /* faint black */
      --text:#111;
      --accent:#0f172a;            /* deep slate */
      --muted:#6b7280;             /* secondary text */
      --gap: clamp(16px, 3vw, 28px);
      --block-h: clamp(260px, 45vh, 520px);
      --skew:-6deg;                /* text tilt */
      --shadow: 0 10px 25px rgba(0,0,0,.08);
    }

    /* ---------- GLOBAL RESET ---------- */
    *,*::before,*::after{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0; color:var(--text); background:var(--bg);
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft Yahei", sans-serif;
      line-height:1.5;
      /* paper grid background */
      background-image:
        repeating-linear-gradient(0deg, var(--grid) 0 1px, transparent 1px 32px),
        repeating-linear-gradient(90deg, var(--grid) 0 1px, transparent 1px 32px);
      background-size: 32px 32px, 32px 32px;
      background-attachment: fixed;
    }

    a{ color:inherit; text-decoration: none; }
    a:focus-visible, button:focus-visible{ outline: 3px solid #0ea5e9; outline-offset: 2px; }

    /* ---------- LAYOUT WRAPPER ---------- */
    .container{
      width:min(1100px, 92%);
      margin-inline:auto;
      padding: clamp(16px, 4vw, 40px) 0 80px;
    }

    header{
      position: sticky; top:0; z-index:30; backdrop-filter: blur(3px);
      background: linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.55));
      border-bottom: 1px solid #e5e7eb;
    }
    .brand{
      display:flex; align-items: baseline; gap:.5rem;
      padding: 14px 0; width:min(1100px, 92%); margin:auto;
    }
    .brand h1{ font-weight:800; letter-spacing:.02em; margin:0; font-size: clamp(20px, 3.2vw, 36px); transform: skew(var(--skew)); }
    .brand p{ margin:0; color:var(--muted); font-size: clamp(12px, 1.6vw, 14px); }

    /* ---------- INDEX VIEW (BUILDING) ---------- */
    .building{
      display:flex; flex-direction: column; gap: var(--gap);
      margin-top: clamp(18px, 3.4vw, 32px);
    }

    .block{
      position: relative; display:grid; grid-template-columns: 1fr auto; gap: clamp(14px, 2vw, 28px);
      align-items: end; min-height: var(--block-h);
      border: 1px solid #00000014; background: #fff; box-shadow: var(--shadow);
      padding: clamp(12px, 2.4vw, 24px);
    }

    .block .photo-wrap{ position: relative; overflow: hidden; height: 100%; border:1px solid #0000001a; background: #f3f4f6; }
    .block img{ width:100%; height:100%; object-fit: cover; display:block; transition: transform .8s ease, filter .8s ease; }
    .block:hover img{ transform: scale(1.035); filter: contrast(1.03) saturate(1.02); }

    .block .name{
      writing-mode: vertical-rl; transform: skew(var(--skew));
      align-self: stretch; display:flex; align-items:center; justify-content:center;
      font-weight:800; letter-spacing:.06em; text-transform: uppercase;
      font-size: clamp(14px, 1.4vw, 18px); color: var(--accent);
    }
    .name a{ position: relative; padding: 10px 6px; }
    .name a::after{
      content:""; position:absolute; inset:auto auto 6px 50%; width:2px; height:24px; background:#111; transform: translateX(-50%) scaleY(0);
      transform-origin: bottom; transition: transform .35s ease;
    }
    .name a:hover::after{ transform: translateX(-50%) scaleY(1); }

    /* ---------- DETAIL VIEW ---------- */
    .detail{ display:none; min-height: calc(100dvh - 70px); }
    .detail.active{ display:block; animation: fadeIn .6s ease both; }

    .detail .hero{
      position: relative; aspect-ratio: 16/10; width: min(1200px, 96%);
      margin: clamp(16px, 3vw, 28px) auto; border: 1px solid #0000001a; box-shadow: var(--shadow);
      background: #fff; overflow: hidden;
    }
    .detail .hero img{ width:100%; height:100%; object-fit: cover; display:block; }

    .detail .thumb{
      position: absolute; right: 14px; bottom: 14px; width: 120px; height: 80px; border: 1px solid #00000033; box-shadow: 0 6px 16px rgba(0,0,0,.12);
      overflow:hidden; background:#f8fafc;
    }
    .detail .thumb img{ width:100%; height:100%; object-fit: cover; display:block; }

    .detail .meta{ width:min(1100px, 92%); margin: 4px auto 24px; display:flex; justify-content: space-between; align-items: baseline; gap: 12px; }
    .detail .title{ font-weight:900; font-size: clamp(22px, 3.2vw, 40px); transform: skew(var(--skew)); letter-spacing:.02em; }
    .detail .back{ color: var(--muted); font-weight:600; border-bottom: 2px solid transparent; }
    .detail .back:hover{ color:#0ea5e9; border-bottom-color:#0ea5e9; }

    footer{ width:min(1100px, 92%); margin:40px auto 80px; color: var(--muted); font-size: 14px; }

    @keyframes fadeIn{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform:none } }

    /* small screens: make name horizontal */
    @media (max-width: 680px){
      .block{ grid-template-columns: 1fr; align-items: start; }
      .block .name{ writing-mode: initial; justify-content: flex-start; }
      .name a::after{ inset: auto 0 0 0; width: 100%; height: 2px; transform-origin: left; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand" role="banner">
      <h1>Tracing the City — Vertical Garden</h1>
      <p aria-hidden="true">七个痕迹 · 垂直楼体式目录</p>
    </div>
  </header>

  <main class="container" id="app">
    <!-- INDEX (BUILDING) -->
    <section id="indexView" aria-label="索引 (大楼)" class="building" role="list">
      <!-- JS will render 7 blocks here -->
    </section>

    <!-- DETAIL -->
    <section id="detailView" class="detail" aria-live="polite">
      <div class="meta">
        <div class="title" id="detailTitle">&nbsp;</div>
        <a href="#" id="backBtn" class="back" aria-label="返回索引">↩ 返回</a>
      </div>
      <figure class="hero" id="heroFigure">
        <img id="heroImg" alt="" />
        <figcaption class="visually-hidden" id="heroCaption"></figcaption>
        <div class="thumb" aria-hidden="true">
          <img id="thumbImg" alt="缩略图" />
        </div>
      </figure>
    </section>
  </main>

  <footer>
    <p><strong>替换图片提示：</strong>在下方 <code>entries</code> 数组里把 <code>img</code> 与 <code>thumb</code> 的链接换成你的照片（建议本地 <code>img/</code> 文件夹）。图片都带 <code>alt</code> 文本以增强无障碍。</p>
  </footer>

  <script>
    // -----------------------------
    // DATA: 7 entries (可自行替换)
    // -----------------------------
    const entries = [
      { id:'trace-01', name:'Kowloon Corridor',
        img:'https://picsum.photos/id/1011/1600/1000',
        thumb:'https://picsum.photos/id/1011/400/250',
        alt:'潮湿的走廊，陈旧瓷砖上映出霓虹反光',
      },
      { id:'trace-02', name:'Lilong Threshold',
        img:'https://picsum.photos/id/1024/1600/1000',
        thumb:'https://picsum.photos/id/1024/400/250',
        alt:'石库门的门框边缘，被手掌磨亮',
      },
      { id:'trace-03', name:'Hutong Wall Ghost',
        img:'https://picsum.photos/id/1031/1600/1000',
        thumb:'https://picsum.photos/id/1031/400/250',
        alt:'被撕去的海报留下浅浅文字幽灵',
      },
      { id:'trace-04', name:'Bund Patina',
        img:'https://picsum.photos/id/1043/1600/1000',
        thumb:'https://picsum.photos/id/1043/400/250',
        alt:'金属栏杆被海风氧化的铜绿',
      },
      { id:'trace-05', name:'Manhattan Bridge Echo',
        img:'https://picsum.photos/id/1050/1600/1000',
        thumb:'https://picsum.photos/id/1050/400/250',
        alt:'桥下回声与光线碎片',
      },
      { id:'trace-06', name:'Times Square Burn-in',
        img:'https://picsum.photos/id/1067/1600/1000',
        thumb:'https://picsum.photos/id/1067/400/250',
        alt:'LED 屏残影叠加在玻璃幕墙',
      },
      { id:'trace-07', name:'Ginza Alley Grain',
        img:'https://picsum.photos/id/1074/1600/1000',
        thumb:'https://picsum.photos/id/1074/400/250',
        alt:'狭窄巷道的木纹围挡',
      }
    ];

    // -----------------------------
    // RENDER: Index blocks
    // -----------------------------
    const indexView = document.getElementById('indexView');
    const detailView = document.getElementById('detailView');
    const backBtn = document.getElementById('backBtn');

    function renderIndex(){
      indexView.innerHTML = '';
      entries.forEach((e, i) => {
        const block = document.createElement('article');
        block.className = 'block';
        block.setAttribute('role','listitem');
        block.innerHTML = `
          <div class="photo-wrap" aria-hidden="true">
            <img src="${e.img}" alt="" loading="lazy" />
          </div>
          <h2 class="name"><a href="#${e.id}" data-id="${e.id}" aria-label="查看 ${e.name}">${String(i+1).padStart(2,'0')} — ${e.name}</a></h2>
        `;
        indexView.appendChild(block);
      });
    }

    // -----------------------------
    // DETAIL: fill content
    // -----------------------------
    const titleEl = document.getElementById('detailTitle');
    const heroImg = document.getElementById('heroImg');
    const thumbImg = document.getElementById('thumbImg');
    const caption = document.getElementById('heroCaption');

    function showDetail(id){
      const entry = entries.find(x => x.id === id);
      if(!entry){ return showIndex(); }
      titleEl.textContent = entry.name;
      heroImg.src = entry.img; heroImg.alt = entry.alt;
      thumbImg.src = entry.thumb; thumbImg.alt = entry.alt + '（缩略图）';
      caption.textContent = entry.alt;
      indexView.style.display = 'none';
      detailView.classList.add('active');
      // scroll to top for detail
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showIndex(){
      detailView.classList.remove('active');
      indexView.style.display = '';
    }

    // -----------------------------
    // ROUTER: hash-based
    // -----------------------------
    function handleRoute(){
      const id = decodeURIComponent(location.hash.replace('#',''));
      if(id){ showDetail(id); }
      else{ showIndex(); }
    }

    window.addEventListener('hashchange', handleRoute);
    backBtn.addEventListener('click', (e)=>{ e.preventDefault(); history.pushState('', document.title, window.location.pathname + window.location.search); handleRoute(); });

    // Startup
    renderIndex();
    handleRoute();
  </script>

</body>
</html>

</body>
</html>